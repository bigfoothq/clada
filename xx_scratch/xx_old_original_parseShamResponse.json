{
  "cases": [
    {
      "name": "single valid file_create action",
      "input": ["```sh sham\n#!SHAM [@three-char-SHA-256: abc]\naction = \"file_create\"\npath = \"/tmp/test.txt\"\ncontent = <<'EOT_SHAM_abc'\nHello world!\nEOT_SHAM_abc\n#!END_SHAM_abc\n```"],
      "expected": {
        "actions": [{
          "action": "file_create",
          "parameters": {
            "path": "/tmp/test.txt",
            "content": "Hello world!"
          },
          "metadata": {
            "blockId": "abc",
            "startLine": 2,
            "endLine": 8
          }
        }],
        "errors": [],
        "summary": {
          "totalBlocks": 1,
          "successCount": 1,
          "errorCount": 0
        }
      }
    },
    {
      "name": "multiple blocks with one invalid",
      "input": ["```sh sham\n#!SHAM [@three-char-SHA-256: good]\naction = \"file_create\"\npath = \"/tmp/good.txt\"\ncontent = \"valid\"\n#!END_SHAM_good\n\n#!SHAM [@three-char-SHA-256: bad]\naction = \"unknown_action\"\npath = \"/tmp/bad.txt\"\n#!END_SHAM_bad\n```"],
      "expected": {
        "actions": [{
          "action": "file_create",
          "parameters": {
            "path": "/tmp/good.txt",
            "content": "valid"
          },
          "metadata": {
            "blockId": "good",
            "startLine": 2,
            "endLine": 6
          }
        }],
        "errors": [{
          "blockId": "bad",
          "errorType": "validation",
          "message": "Unknown action: unknown_action",
          "line": 8,
          "shamContent": "#!SHAM [@three-char-SHA-256: bad]\naction = \"unknown_action\"\npath = \"/tmp/bad.txt\"\n#!END_SHAM_bad"
        }],
        "summary": {
          "totalBlocks": 2,
          "successCount": 1,
          "errorCount": 1
        }
      }
    },
    {
      "name": "missing required parameter",
      "input": ["```sh sham\n#!SHAM [@three-char-SHA-256: miss]\naction = \"file_create\"\ncontent = \"missing path\"\n#!END_SHAM_miss\n```"],
      "expected": {
        "actions": [],
        "errors": [{
          "blockId": "miss",
          "errorType": "validation",
          "message": "Missing required parameter: path",
          "line": 2,
          "shamContent": "#!SHAM [@three-char-SHA-256: miss]\naction = \"file_create\"\ncontent = \"missing path\"\n#!END_SHAM_miss"
        }],
        "summary": {
          "totalBlocks": 1,
          "successCount": 0,
          "errorCount": 1
        }
      }
    },
    {
      "name": "type conversion with boolean and integer",
      "input": ["```sh sham\n#!SHAM [@three-char-SHA-256: typ]\naction = \"exec\"\ncode = \"print('hi')\"\nlang = \"python\"\ncwd = \"/tmp\"\n#!END_SHAM_typ\n```"],
      "expected": {
        "actions": [{
          "action": "exec",
          "parameters": {
            "code": "print('hi')",
            "lang": "python",
            "cwd": "/tmp"
          },
          "metadata": {
            "blockId": "typ",
            "startLine": 2,
            "endLine": 7
          }
        }],
        "errors": [],
        "summary": {
          "totalBlocks": 1,
          "successCount": 1,
          "errorCount": 0
        }
      }
    }
  ]
}